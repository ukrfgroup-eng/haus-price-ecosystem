batch
@echo off
chcp 65001 > nul
echo ===========================================
echo –ù–ê–°–¢–†–û–ô–ö–ê API –§–ù–° –î–õ–Ø –≠–ö–û–°–ò–°–¢–ï–ú–´
echo ===========================================

REM –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –ª–æ–≥–æ–≤
if not exist logs mkdir logs

REM –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª .env –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
if not exist .env (
    echo –°–æ–∑–¥–∞—é —Ñ–∞–π–ª .env...
    (
        echo # ===========================================
        echo # API –§–ù–° –ö–õ–Æ–ß (–ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® –†–ï–ê–õ–¨–ù–´–ô –ö–õ–Æ–ß)
        echo # ===========================================
        echo FNS_API_KEY=–í–ê–®_–†–ï–ê–õ–¨–ù–´–ô_–ö–õ–Æ–ß_–§–ù–°_–ó–î–ï–°–¨
        echo.
        echo # ===========================================
        echo # –ù–ê–°–¢–†–û–ô–ö–ò –ë–ê–ó–´ –î–ê–ù–ù–´–•
        echo # ===========================================
        echo DATABASE_URL=postgresql://haus_price_user:–ø–∞—Ä–æ–ª—å@localhost/haus_price_db
        echo REDIS_URL=redis://localhost:6379
        echo.
        echo # ===========================================
        echo # –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        echo # ===========================================
        echo DEBUG=False
        echo FLASK_SECRET_KEY=—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ_—Å–ª—É—á–∞–π–Ω—ã–π_–∫–ª—é—á
        echo DOMAIN=https://–¥–æ–º–∞-—Ü–µ–Ω—ã.—Ä—Ñ
        echo.
        echo # ===========================================
        echo # PROTALK –ò TELEGRAM
        echo # ===========================================
        echo PROTALK_WEBHOOK_SECRET=—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ_—Å–ª—É—á–∞–π–Ω—ã–π_–∫–ª—é—á
        echo TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
    ) > .env
    echo ‚úÖ –§–∞–π–ª .env —Å–æ–∑–¥–∞–Ω
) else (
    echo ‚ÑπÔ∏è –§–∞–π–ª .env —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
)

REM –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª—é—á –≤ .env
set /p update_key="–•–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –∫–ª—é—á API –§–ù–°? (y/n): "
if /i "%update_key%"=="y" (
    set /p fns_key="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∫–ª—é—á API –§–ù–°: "
    if not "%fns_key%"=="" (
        REM –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª—é—á –≤ .env (—Ç—Ä–µ–±—É–µ—Ç—Å—è PowerShell)
        powershell -Command "(Get-Content .env) -replace 'FNS_API_KEY=.*', 'FNS_API_KEY=%fns_key%' | Set-Content .env"
        echo ‚úÖ –ö–ª—é—á API –§–ù–° –æ–±–Ω–æ–≤–ª–µ–Ω
    ) else (
        echo ‚ùå –ö–ª—é—á –Ω–µ –≤–≤–µ–¥–µ–Ω
    )
)

REM –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python...
pip install -r requirements.txt
pip install redis requests python-dotenv

REM –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
echo –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç API –§–ù–°...
python scripts/test_fns_with_key.py

REM –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
if not exist data\cache mkdir data\cache
if not exist data\logs mkdir data\logs

echo.
echo ===========================================
echo –ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!
echo ===========================================
echo.
echo üìã –ß–¢–û –°–î–ï–õ–ê–ù–û:
echo ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env (–µ—Å–ª–∏ –Ω–µ –±—ã–ª–æ)
echo ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
echo ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API –§–ù–°
echo ‚úÖ –°–æ–∑–¥–∞–Ω—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
echo.
echo üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
echo python backend/app.py
echo.
echo üîß –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª .env –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
echo 1. FNS_API_KEY - –≤–∞—à –∫–ª—é—á API –§–ù–°
echo 2. DATABASE_URL - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
echo 3. PROTALK_WEBHOOK_SECRET - —Å–µ–∫—Ä–µ—Ç –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
pause
